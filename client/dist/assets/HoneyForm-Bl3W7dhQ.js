import{r as n,U as j,g as w,u as f,c as B,a as u,p as C,d as E,j as t,S,E as d,B as R,F,e as D}from"./index-ButMNUXy.js";const I=({initObj:a,viewHoney:o})=>{n.useContext(j);const[i,h]=n.useState(!a),{id:c}=w(),{setHives:m}=f(),{addToKey:x,updateKey:p}=D(m,"hives",null,o),s=parseInt(c),g=a?{dateReset:a.dateReset||"",datePulled:a.datePulled||"",weight:a.weight||""}:{dateReset:"",datePulled:"",weight:""},P=a?l=>p("honey_pulls",a.id,l,s):l=>x("honey_pulls",l,s),y=B({dateReset:u().required("Date reset is required").typeError("Invalid date format"),datePulled:u().nullable().typeError("Invalid date format"),weight:C().nullable().min(0,"Weight cannot be below 0").max(200,"Weight cannot exceed 200").typeError("Weight must be a number")}),e=E({initialValues:g,validationSchema:y,onSubmit:l=>{const v={...Object.fromEntries(Object.entries(l).map(([b,r])=>[b,r===""?null:r])),hiveId:s};P(v)}});return t.jsx("div",{children:i?t.jsxs(S,{onSubmit:e.handleSubmit,children:[t.jsx("h2",{children:a?"Update Honey Pull":"Add New Honey Pull"}),t.jsxs("div",{className:"form-input",children:[t.jsx("label",{htmlFor:"dateReset",children:"Start Date"}),t.jsx("input",{type:"date",id:"dateReset",name:"dateReset",value:e.values.dateReset,onChange:e.handleChange,onBlur:e.handleBlur}),e.touched.datePulled&&e.errors.datePulled&&t.jsx(d,{children:e.errors.datePulled})]}),t.jsxs("div",{className:"form-input",children:[t.jsx("label",{htmlFor:"datePulled",children:"Date Pulled"}),t.jsx("input",{type:"date",id:"datePulled",name:"datePulled",value:e.values.datePulled,onChange:e.handleChange,onBlur:e.handleBlur}),e.touched.datePulled&&e.errors.datePulled&&t.jsx(d,{children:e.errors.datePulled})]}),t.jsxs("div",{className:"form-input",children:[t.jsx("label",{htmlFor:"weight",children:"Weight (lbs)"}),t.jsx("input",{type:"number",id:"weight",name:"weight",value:e.values.weight,onChange:e.handleChange,onBlur:e.handleBlur}),e.touched.weight&&e.errors.weight&&t.jsx(d,{children:e.errors.weight})]}),t.jsx(R,{type:"submit",children:a?"Update":"Add"})]}):t.jsx(F,{label:"Honey Pull Details",formValues:e.values,setIsEditing:h})})};export{I as default};
