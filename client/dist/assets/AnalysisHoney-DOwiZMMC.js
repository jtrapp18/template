const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/PestImpacts-ohok4WNM.js","assets/index-ButMNUXy.js","assets/index-Dm1PeKWU.css","assets/TrendChart-BZP5xCwr.js","assets/ClipLoader-DIeTHcs1.js","assets/TempVsHoney-bgI2li1B.js"])))=>i.map(i=>d[i]);
import{r as c,j as e,P as m,G as P,_ as p,L as y,i as v,k as g}from"./index-ButMNUXy.js";import{u as _,L as C,T as H}from"./TrendChart-BZP5xCwr.js";import"./ClipLoader-DIeTHcs1.js";const k=({title:t,label:l,valueData:o,selectedSlice:d,setSelectedSlice:i})=>{const{width:s,height:f,ref:x}=_(),a=c.useRef(null);if(!l.data||!o)return e.jsx(m,{children:e.jsx("p",{children:"Loading..."})});const j=c.useCallback(r=>{if(r.points?.length){let h=r.points[0].label;!isNaN(h)&&!isNaN(parseFloat(h))&&(h=parseInt(h,10)),i({labelCol:l.label,labelFilter:h})}},[l.label,i]);c.useEffect(()=>{const r=b=>{a.current&&a.current.contains(b.target)&&!b.target.closest(".slice")&&i(null)};return document.addEventListener("click",r),()=>document.removeEventListener("click",r)},[i]);const u={labels:l.data,values:o,type:"pie",textinfo:"label+percent",hoverinfo:"label+percent+value",automargin:!0},n={title:{text:t,font:{color:"black"}},showlegend:!0,legend:{x:1,y:.5,xanchor:"left",yanchor:"middle",title:{text:l.label,font:{color:"black"}}},width:s,height:f};return e.jsx(m,{ref:a,children:e.jsx(C,{data:[u],layout:n,config:{responsive:!0},onClick:j,className:"pie-chart",chartType:"pie"})})},E=({filterLabel:t,filteredData:l,graphData:o,pieSplit:d,selectedSlice:i,setSelectedSlice:s})=>e.jsxs("div",{children:[e.jsx("span",{children:t?"Click outside of pie to clear filter":"Click slice below to filter data"}),e.jsx("div",{className:"graph-container",children:e.jsx(k,{title:`Total Honey Production by ${d==="hiveId"?"Hive":"State"}`,label:{data:o[d],label:d},valueData:o.weight,selectedSlice:i,setSelectedSlice:s})}),e.jsxs(P,{children:[e.jsx("hr",{}),e.jsx("h3",{children:"Honey Production over Time"}),e.jsx("hr",{})]}),e.jsx("div",{className:"graph-container",children:e.jsx(H,{title:"Total Honey Production by Pull Date",x:{data:l.datePulled,label:"Honey Pull Date"},y:{data:l.weight,label:"Honey Production (lbs)"}})})]}),L=c.lazy(()=>p(()=>import("./PestImpacts-ohok4WNM.js"),__vite__mapDeps([0,1,2,3,4]))),T=c.lazy(()=>p(()=>import("./TempVsHoney-bgI2li1B.js"),__vite__mapDeps([5,1,2,3,4]))),R=({graphData:t,label:l,filters:o})=>{const i=o.includes("user")?"hiveId":"state",[s,f]=c.useState(null),x=s?`${s.labelCol}: ${s.labelFilter}`:"";if(!t)return e.jsx(y,{});if(t.length===0)return e.jsx(y,{});if(t.weight.length===0)return e.jsx("h3",{children:"No honey pulls have been recorded"});const a=s?t[s.labelCol].map((n,r)=>n===s.labelFilter?r:-1).filter(n=>n!==-1):null,u=Object.fromEntries(["datePulled","temp","weight","avg_30DayWeight","humidity","antsPresent","slugsPresent","hiveBeetlesPresent","waxMothsPresent","waspsHornetsPresent","micePresent","robberBeesPresent"].map(n=>[n,a?a.map(r=>t[n][r]):t[n]]));return e.jsxs(v,{children:[e.jsxs("h2",{children:[l,x?` for ${g(x)}`:""]}),e.jsx(E,{filterLabel:x,filteredData:u,graphData:t,pieSplit:i,selectedSlice:s,setSelectedSlice:f}),e.jsx(L,{filteredData:u}),e.jsx(T,{filteredData:u}),e.jsx("br",{}),e.jsx("br",{})]})};export{R as default};
