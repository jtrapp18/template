import{q as g,j as e,r as j,g as H,u as N,c as D,a as M,p as t,t as n,b as c,d as A,E as l,B as I,F as L,S as E,e as T}from"./index-ButMNUXy.js";const q=g.footer`
    display: flex;
    align-items: center;
    justify-content: space-between;
    position: absolute;
    bottom:0;
    left: 0;
    width: 100%;
    background: black;
    padding-top: 2%;
    box-shadow: 0px -4px 10px rgba(115, 108, 108, 0.5);

    .page-count {
        cursor: pointer;

        &:hover {
            color: var(--bright-blue);
            text-decoration: underline;
        }
    }

    button {
        background: black;
        color: var(--honey);

        &.disabled {
            color: gray;
        }
    }
`,W=({step:a,setStep:o,prevStep:d,nextStep:u})=>e.jsxs(q,{id:"footer",children:[e.jsx("button",{type:"button",onClick:d,disabled:a===1,children:"Prev Page"}),e.jsx("p",{className:"page-count",onClick:()=>o(0),children:a===0?"Index":`Page ${a} of 5`}),e.jsx("button",{type:"button",onClick:u,disabled:a===5,children:"Next Page"})]}),$=g.div`
    display: flex;
    flex-direction: column;

    div {
        display: flex;
        width: 100%;
        justify-content: space-between;

        p {
            color: var(--bright-blue);
            text-decoration: underline;
            cursor: pointer;
        }
    }
`,R=({setStep:a})=>{const o=[{section:"Basic Information",page:1},{section:"Weather",page:2},{section:"Pests",page:3},{section:"Active Hive Management",page:4},{section:"Outcomes",page:5},{section:"Additional Notes",page:5},{section:"Submit",page:5}];return e.jsxs($,{children:[e.jsx("h3",{children:"Index"}),o.map(d=>e.jsxs("div",{onClick:()=>a(d.page),children:[e.jsx("p",{children:d.section}),e.jsx("p",{children:d.page})]},d.section))]})},V=g(E)`
  height: 70vh;

  .checkbox-area {
      padding: 5%;
      border: 1px solid gray;
      width: 100%;

      .form-input {
        width: 100%;
        display: flex;
        justify-content: space-between;
        
        input {
          width: fit-content;
        }
      }
  }
`,_=({initObj:a,honeyPullId:o,viewInspection:d})=>{const[u,p]=j.useState(!a),{id:y}=H(),{setHives:C}=N(),{addNestedKey:f,updateNestedKey:P}=T(C,"hives",null,d),v=parseInt(y),[i,h]=j.useState(1),B=()=>h(r=>r-1),w=async()=>{const r=await s.validateForm(),m={1:["dateChecked","bias"],2:["temp","humidity","weatherConditions"],5:["activitySurroundingHive","stabilityInHive"]},b=Object.keys(r).filter(x=>m[i]?.includes(x));if(b.length>0){s.setTouched(b.reduce((x,F)=>({...x,[F]:!0}),{}));return}h(i+1)},k=a?r=>P("honey_pulls",o,"inspections",a.id,r,v):r=>{console.log(r),f("honey_pulls",o,"inspections",r,v)},S=D({dateChecked:M().required("Date is required").typeError("Invalid date format"),bias:t().required("Bias is required").min(0,"Must be a non-negative number"),hasEggs:n(),hasLarvae:n(),temp:t().min(-10,"Temperature must be between -10 and 50").max(50,"Temperature must be between -10 and 50"),humidity:t().min(0,"Humidity must be between 0 and 100").max(100,"Humidity must be between 0 and 100"),weatherConditions:c().required().oneOf(["Sunny","Overcast","Rainy","Snowy","Windy"]),antsPresent:n(),slugsPresent:n(),hiveBeetlesPresent:n(),waxMothsPresent:n(),waspsHornetsPresent:n(),micePresent:n(),robberBeesPresent:n(),numPollenPatties:t().min(0,"Number of pollen patties cannot be negative"),numSugarSyrupFrames:t().min(0,"Number of sugar syrup frames cannot be negative"),oxalicAcidDosage:t().min(0,"Oxalic acid dosage cannot be negative"),formicAcidDosage:t().min(0,"Formic acid dosage cannot be negative"),thymolDosage:t().min(0,"Thymol dosage cannot be negative"),apistanDosage:t().min(0,"Apistan dosage cannot be negative"),varroaMiteCount:t().min(0,"Varroa mite count cannot be negative"),hasChalkbrood:n(),hasTwistedLarvae:n(),activitySurroundingHive:c().required().oneOf(["Low","Medium","High"]),stabilityInHive:c().required().oneOf(["Low","Medium","High"]),notes:c().nullable().max(255,"Notes must be at most 255 characters")}),s=A({enableReinitialize:!0,initialValues:{dateChecked:a?.dateChecked||"",bias:a?.bias??0,hasEggs:a?.hasEggs??!1,hasLarvae:a?.hasLarvae??!1,temp:a?.temp??0,humidity:a?.humidity||0,weatherConditions:a?.weatherConditions||"",antsPresent:a?.antsPresent??!1,slugsPresent:a?.slugsPresent??!1,hiveBeetlesPresent:a?.hiveBeetlesPresent??!1,waxMothsPresent:a?.waxMothsPresent??!1,waspsHornetsPresent:a?.waspsHornetsPresent??!1,micePresent:a?.micePresent??!1,robberBeesPresent:a?.robberBeesPresent??!1,numPollenPatties:a?.numPollenPatties??0,numSugarSyrupFrames:a?.numSugarSyrupFrames??0,oxalicAcidDosage:a?.oxalicAcidDosage??0,formicAcidDosage:a?.formicAcidDosage??0,thymolDosage:a?.thymolDosage??0,apistanDosage:a?.apistanDosage??0,hasTwistedLarvae:a?.hasTwistedLarvae??!1,hasChalkbrood:a?.hasChalkbrood??!1,varroaMiteCount:a?.varroaMiteCount??0,activitySurroundingHive:a?.activitySurroundingHive||"",stabilityInHive:a?.stabilityInHive||"",notes:a?.notes??""},validationSchema:S,onSubmit:r=>{const m={...r,honeyPullId:o};k(m),p(!1)}});return e.jsx("div",{children:u?e.jsxs(V,{onSubmit:s.handleSubmit,children:[e.jsx("h2",{children:a?"Inspection Details":"Add New Inspection"}),e.jsx("br",{}),i===0&&e.jsx(R,{setStep:h}),i===1&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{children:"Basic Information"}),e.jsx("span",{children:`Honey Pull ID: ${o}`}),e.jsx("br",{}),e.jsxs("div",{className:"form-input",children:[e.jsx("label",{htmlFor:"dateChecked",children:"Date"}),e.jsx("input",{type:"date",id:"dateChecked",name:"dateChecked",value:s.values.dateChecked,onChange:s.handleChange,onBlur:s.handleBlur}),s.touched.dateChecked&&s.errors.dateChecked&&e.jsx(l,{children:s.errors.dateChecked})]}),e.jsx("hr",{}),e.jsx("h3",{children:"Hive Conditions"}),e.jsxs("div",{className:"form-input",children:[e.jsx("label",{htmlFor:"bias",children:"Bias (Number of frames with brood)"}),e.jsx("input",{type:"number",id:"bias",name:"bias",value:s.values.bias,onChange:s.handleChange,onBlur:s.handleBlur}),s.touched.bias&&s.errors.bias&&e.jsx(l,{children:s.errors.bias})]}),e.jsxs("div",{className:"checkbox-area",children:[e.jsxs("div",{className:"form-input",children:[e.jsx("label",{htmlFor:"hasEggs",children:"Eggs Present"}),e.jsx("input",{type:"checkbox",id:"hasEggs",name:"hasEggs",checked:s.values.hasEggs,onChange:s.handleChange,onBlur:s.handleBlur})]}),e.jsxs("div",{className:"form-input",children:[e.jsx("label",{htmlFor:"hasLarvae",children:"Larva Present"}),e.jsx("input",{type:"checkbox",id:"hasLarvae",name:"hasLarvae",checked:s.values.hasLarvae,onChange:s.handleChange,onBlur:s.handleBlur})]})]}),e.jsx("br",{}),e.jsx("br",{})]}),i===2&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{children:"Weather"}),e.jsxs("div",{className:"form-input",children:[e.jsx("label",{htmlFor:"temp",children:"Temperature (Â°C)"}),e.jsx("input",{type:"number",id:"temp",name:"temp",value:s.values.temp,onChange:s.handleChange,onBlur:s.handleBlur}),s.touched.temp&&s.errors.temp&&e.jsx(l,{children:s.errors.temp})]}),e.jsxs("div",{className:"form-input",children:[e.jsx("label",{htmlFor:"humidity",children:"Humidity"}),e.jsx("input",{type:"number",id:"humidity",name:"humidity",value:s.values.humidity,onChange:s.handleChange,onBlur:s.handleBlur}),s.touched.humidity&&s.errors.humidity&&e.jsx(l,{children:s.errors.humidity})]}),e.jsxs("div",{className:"form-input",children:[e.jsx("label",{htmlFor:"weatherConditions",children:"Weather Conditions"}),e.jsxs("select",{id:"weatherConditions",name:"weatherConditions",value:s.values.weatherConditions,onChange:s.handleChange,onBlur:s.handleBlur,children:[e.jsx("option",{value:"",children:"Select Weather"}),e.jsx("option",{value:"Sunny",children:"Sunny"}),e.jsx("option",{value:"Overcast",children:"Overcast"}),e.jsx("option",{value:"Rainy",children:"Rainy"}),e.jsx("option",{value:"Snowy",children:"Snowy"}),e.jsx("option",{value:"Windy",children:"Windy"})]}),s.touched.weatherConditions&&s.errors.weatherConditions&&e.jsx(l,{children:s.errors.weatherConditions})]}),e.jsx("br",{}),e.jsx("br",{})]}),i===3&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{children:"Pests"}),e.jsxs("div",{className:"checkbox-area",children:[e.jsxs("div",{className:"form-input",children:[e.jsx("label",{htmlFor:"antsPresent",children:"Ants Present"}),e.jsx("input",{type:"checkbox",id:"antsPresent",name:"antsPresent",checked:s.values.antsPresent,onChange:s.handleChange,onBlur:s.handleBlur})]}),e.jsxs("div",{className:"form-input",children:[e.jsx("label",{htmlFor:"slugsPresent",children:"Slugs Present"}),e.jsx("input",{type:"checkbox",id:"slugsPresent",name:"slugsPresent",checked:s.values.slugsPresent,onChange:s.handleChange,onBlur:s.handleBlur})]}),e.jsxs("div",{className:"form-input",children:[e.jsx("label",{htmlFor:"hiveBeetlesPresent",children:"Hive Beetles Present"}),e.jsx("input",{type:"checkbox",id:"hiveBeetlesPresent",name:"hiveBeetlesPresent",checked:s.values.hiveBeetlesPresent,onChange:s.handleChange,onBlur:s.handleBlur})]}),e.jsxs("div",{className:"form-input",children:[e.jsx("label",{htmlFor:"waxMothsPresent",children:"Wax Moths Present"}),e.jsx("input",{type:"checkbox",id:"waxMothsPresent",name:"waxMothsPresent",checked:s.values.waxMothsPresent,onChange:s.handleChange,onBlur:s.handleBlur})]}),e.jsxs("div",{className:"form-input",children:[e.jsx("label",{htmlFor:"waspsHornetsPresent",children:"Wasps/Hornets Present"}),e.jsx("input",{type:"checkbox",id:"waspsHornetsPresent",name:"waspsHornetsPresent",checked:s.values.waspsHornetsPresent,onChange:s.handleChange,onBlur:s.handleBlur})]}),e.jsxs("div",{className:"form-input",children:[e.jsx("label",{htmlFor:"micePresent",children:"Mice Present"}),e.jsx("input",{type:"checkbox",id:"micePresent",name:"micePresent",checked:s.values.micePresent,onChange:s.handleChange,onBlur:s.handleBlur})]}),e.jsxs("div",{className:"form-input",children:[e.jsx("label",{htmlFor:"robberBeesPresent",children:"Robber Bees Present"}),e.jsx("input",{type:"checkbox",id:"robberBeesPresent",name:"robberBeesPresent",checked:s.values.robberBeesPresent,onChange:s.handleChange,onBlur:s.handleBlur})]})]}),e.jsx("br",{}),e.jsx("br",{})]}),i===4&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{children:"Active Hive Management"}),e.jsxs("div",{className:"form-input",children:[e.jsx("label",{htmlFor:"numPollenPatties",children:"Number of Pollen Patties"}),e.jsx("input",{type:"number",id:"numPollenPatties",name:"numPollenPatties",value:s.values.numPollenPatties,onChange:s.handleChange,onBlur:s.handleBlur})]}),e.jsxs("div",{className:"form-input",children:[e.jsx("label",{htmlFor:"numSugarSyrupFrames",children:"Number of Sugar Syrup Frames"}),e.jsx("input",{type:"number",id:"numSugarSyrupFrames",name:"numSugarSyrupFrames",value:s.values.numSugarSyrupFrames,onChange:s.handleChange,onBlur:s.handleBlur})]}),e.jsxs("div",{className:"form-input",children:[e.jsx("label",{htmlFor:"oxalicAcidDosage",children:"Oxalic Acid Dosage (grams)"}),e.jsx("input",{type:"number",id:"oxalicAcidDosage",name:"oxalicAcidDosage",value:s.values.oxalicAcidDosage,onChange:s.handleChange,onBlur:s.handleBlur})]}),e.jsxs("div",{className:"form-input",children:[e.jsx("label",{htmlFor:"formicAcidDosage",children:"Formic Acid Dosage (grams)"}),e.jsx("input",{type:"number",id:"formicAcidDosage",name:"formicAcidDosage",value:s.values.formicAcidDosage,onChange:s.handleChange,onBlur:s.handleBlur})]}),e.jsxs("div",{className:"form-input",children:[e.jsx("label",{htmlFor:"thymolDosage",children:"Thymol Dosage (grams)"}),e.jsx("input",{type:"number",id:"thymolDosage",name:"thymolDosage",value:s.values.thymolDosage,onChange:s.handleChange,onBlur:s.handleBlur})]}),e.jsxs("div",{className:"form-input",children:[e.jsx("label",{htmlFor:"apistanDosage",children:"Apistan Dosage (grams)"}),e.jsx("input",{type:"number",id:"apistanDosage",name:"apistanDosage",value:s.values.apistanDosage,onChange:s.handleChange,onBlur:s.handleBlur})]}),e.jsx("br",{}),e.jsx("br",{})]}),i===5&&e.jsxs(e.Fragment,{children:[e.jsx("h2",{children:"Outcomes"}),e.jsxs("div",{className:"form-input",children:[e.jsx("label",{htmlFor:"varroaMiteCount",children:"Varroa Mite Count"}),e.jsx("input",{type:"number",id:"varroaMiteCount",name:"varroaMiteCount",value:s.values.varroaMiteCount,onChange:s.handleChange,onBlur:s.handleBlur})]}),e.jsxs("div",{className:"checkbox-area",children:[e.jsxs("div",{className:"form-input",children:[e.jsx("label",{htmlFor:"hasTwistedLarvae",children:"Has Twisted Larvae?"}),e.jsx("input",{type:"checkbox",id:"hasTwistedLarvae",name:"hasTwistedLarvae",checked:s.values.hasTwistedLarvae,onChange:s.handleChange,onBlur:s.handleBlur})]}),e.jsxs("div",{className:"form-input",children:[e.jsx("label",{htmlFor:"hasChalkbrood",children:"Has Chalkbrood?"}),e.jsx("input",{type:"checkbox",id:"hasChalkbrood",name:"hasChalkbrood",checked:s.values.hasChalkbrood,onChange:s.handleChange,onBlur:s.handleBlur})]})]}),e.jsx("hr",{}),e.jsx("h2",{children:"Additional Notes"}),e.jsxs("div",{className:"form-input",children:[e.jsx("label",{htmlFor:"activitySurroundingHive",children:"Activity Surrounding Hive"}),e.jsxs("select",{id:"activitySurroundingHive",name:"activitySurroundingHive",value:s.values.activitySurroundingHive,onChange:s.handleChange,onBlur:s.handleBlur,children:[e.jsx("option",{value:"",children:"Select Activity Level"}),e.jsx("option",{value:"Low",children:"Low"}),e.jsx("option",{value:"Medium",children:"Medium"}),e.jsx("option",{value:"High",children:"High"})]}),s.touched.activitySurroundingHive&&s.errors.activitySurroundingHive&&e.jsx(l,{children:s.errors.activitySurroundingHive})]}),e.jsxs("div",{className:"form-input",children:[e.jsx("label",{htmlFor:"stabilityInHive",children:"Stability in Hive"}),e.jsxs("select",{id:"stabilityInHive",name:"stabilityInHive",value:s.values.stabilityInHive,onChange:s.handleChange,onBlur:s.handleBlur,children:[e.jsx("option",{value:"",children:"Select Stability"}),e.jsx("option",{value:"Low",children:"Low"}),e.jsx("option",{value:"Medium",children:"Medium"}),e.jsx("option",{value:"High",children:"High"})]}),s.touched.stabilityInHive&&s.errors.stabilityInHive&&e.jsx(l,{children:s.errors.stabilityInHive})]}),e.jsxs("div",{className:"form-input",children:[e.jsx("label",{htmlFor:"notes",children:"Notes"}),e.jsx("textarea",{id:"notes",name:"notes",value:s.values.notes,onChange:s.handleChange,onBlur:s.handleBlur})]}),e.jsx("hr",{}),e.jsx(I,{type:"submit",children:a?"Submit Updates":"Submit New Inspection"}),(s.errors.dateChecked||s.errors.bias)&&e.jsx("div",{className:"submit-error",onClick:()=>h(1),children:e.jsx(l,{children:"Fix errors on page 1 before submitting"})}),(s.errors.temp||s.errors.humidity||s.errors.weatherConditions)&&e.jsx("div",{className:"submit-error",onClick:()=>h(2),children:e.jsx(l,{children:"Fix errors on page 2 before submitting"})}),e.jsx("hr",{}),e.jsx("br",{}),e.jsx("br",{})]}),e.jsx(W,{step:i,setStep:h,prevStep:B,nextStep:w})]}):e.jsx(L,{label:"Inspection Details",formValues:s.values,setIsEditing:p})})};export{_ as default};
